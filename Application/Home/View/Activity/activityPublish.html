<include file="Public/header"/>
    <link rel="stylesheet" href="__PUBLIC__/styles/postActivity.css">
<script language="javascript" type="text/javascript" src="__PUBLIC__/datepicker/WdatePicker.js"></script>
<!--引入日期插件文件结束-->
<title>发布活动</title>
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.all.min.js"></script>
</head>
<body>
<!--postActivity-->
<div class="mainBg">
    <!--header登录注册-->
  <include file="Public/top"/>
    <!--header登录注册 end-->
    <!--header logo-->
    <!--header logo end-->
    <!--导航条-->
  <include file="Public/nav"/>
    <!--导航条 end-->
    <!--content-->
        <form action="{:U('Home/Activity/activityPublish')}" method="post" enctype="multipart/form-data" class="content bgwh f18 g6 js-act-form">
        <h2 class="f20 wh b9a">填写发布信息</h2>
        <div>
            <label>活动名称 <b>*</b></label>
            <input name="title" type="text" class="require js-title" value="{$activity.title}" notNull="活动名称">
        </div>
        <div class="actTime">
            <label>活动时间 <b>*</b></label>
            <input class="startTime"  type="text" readonly value="开始时间"/>
            <input class="require js-starttime" value="{$activity.starttime}" type="text" name="starttime" onClick="WdatePicker({dateFmt:'yyyy-M-d HH:mm',disabledDates: 'unvalidate_date_Array'})"/>
            <!--<input type="datetime-local" name="starttime" value="2016-10-18  10:30"/>-->
            <input class="endTime"  type="text" readonly value="结束时间"/>
            <!--<input type="text" name="endtime" onClick="WdatePicker()"/>-->
            <input class="require js-endtime" value="{$activity.endtime}" type="text" name="endtime" onClick="WdatePicker({dateFmt:'yyyy-M-d HH:mm',disabledDates: 'unvalidate_date_Array'})"/>
            <!--<input type="datetime-local" name="endtime" value="2017-1-22 17:00"/>-->
        </div>
        <div class="registered">
            <label>活动地点 <b>*</b></label>
            <div class="dib">
                <div class="address dibcomAddress" data-toggle="distpicker">
                    <select name="prov"  data-province="{$activity.prov}" id="province1" class="dib select f16 require js-prov">
                        <option value="">选择省份</option>
                    </select>
                    <span class="f16 g3c province dib">省</span>
                    <select  name="city" data-city="{$activity.city}"  id="city" class="dib select f16 require js-city">
                        <option>请选择</option>
                    </select>
                    <span class="f16 g3c">市</span>
                </div>
                <input class="dib detailAdd require js-address" value="{$activity.address}" name="address" type="text" placeholder="请输入详细地址">
            </div>
        </div>
        <div class="poster">
            <label>活动海报</label>
            <div class="dib upImg">
                <lable  class="imgdiv" id="imgdiv" for="up_img">
                    <if condition="$activity.picture eq ''">
                        <img id="imgShow" class="imgShow" src="__PUBLIC__/images/personal/unImg.png" />
                        <else/>
                        <img id="imgShow" class="imgShow" src="__PUBLIC__{$activity.picture}" />
                    </if>
                </lable>
                <div class="dib">
                    <p class="gc f16 hidden-xs">图片不得大于4M (jpg、gif、png、bmp)</p>
                    <p class="gc f16 hidden-xs">推荐尺寸 472*280 px的图片</p>
                    <p class="gc f16 hidden-xs">温馨提示：一张漂亮的海报，会起到意想不到的效果，</p>
                    <p class="gc f16 hidden-xs">它会让你的活动显得更加有吸引力，更有品质；</p>
                    <p class="gc f16 hidden-xs">这将会为您的活动带来更多的用户报名哦！</p>
                    <div class="up_img rel pointer">
                        <input class="abs require js-picture pointer" name="picture" type="file" id="up_img" value="上传"/>
                        <label class="abs f20 wh pointer" for="up_img">上传</label>
                    </div>
                </div>
            </div>
        </div>
        <div class="activityType">
            <label>活动类型</label>
                <select name="type" class="dib select f16 require">
                    <foreach name="types" item="vo">
                        <option value="{$vo.name}" <if condition="$activity.type eq $vo['name']">selected</if> >{$vo.name}</option>
                    </foreach>
                </select>
        </div>
        <div class="signCost">
            <label>报名费用</label>
            <if condition="$activity.isfree eq 1">
                <input type="hidden" class="js-isfree" name="isfree" value="1"/>
                <else/>
                <input type="hidden" class="js-isfree" name="isfree" value="0"/>
            </if>
            <input class="<if condition="$activity.isfree neq 1">freeAct</if> other" type="text" readonly value="免费活动"/>
            <input class="<if condition="$activity.isfree eq 1">freeAct</if> " type="text" readonly value="收费活动"/>
        </div>
        <div class="number">
            <label >人数(默认0无限制)</label>
            <if condition="$activity eq null">
                <input name="limit" type="text" value="0" >
                <else/>
                <input name="limit" type="text" value="{$activity.limit}" >
            </if>
        </div>
        <div class="number">
            <label >参与金额</label>
            <if condition="$activity eq null">
            <input name="price" value="0" class="dib" type="text" >
            <else/>
            <input name="price" value="{$activity.price}" class="dib" type="text" >
            </if>
            <span>元</span>
        </div>
            <div>
                 <label >联系人</label>
                 <input class="g6 require" value="{$activity.contact}" name="contact" type="text">
            </div>
            <div>
            <label >联系方式</label>
            <input class="g6 require" value="{$activity.telephone}" name="telephone" type="text" placeholder="请输入11位手机号码，座机请输入“区号-电话号码-分机号”">
        </div>
        <div>
            <label>活动详情</label>
            <script class="js-content require" id="editor" name="content" type="text/plain" >{$activity.content}</script>
        </div>
        <div class="affirm">
            <if condition="$activity.activityid neq ''">
                <input type="hidden" name="id" value="{$activity.activityid}"/>
            </if>
            <if condition="$activity.activityid eq ''">
                <input class="f22 wh b9a" type="button" onclick="checkAll();" value="确认发布"/>
                <else/>
                <input class="f22 wh b9a js-updated-sub" type="button" value="确认修改"/>
            </if>
        </div>
    </form>
</div>
<!--content end-->
<!--底部导航&footer-->
<include file="Public/footer3"/>
<!--底部导航&footer end-->
<!--共用js-->
<script src="__PUBLIC__/scripts/distpicker.data.js"></script>
<script src="__PUBLIC__/scripts/distpicker.js"></script>
<script src="__PUBLIC__/scripts/base.js"></script>
<script src="__PUBLIC__/scripts/bootstrap.min.js"></script>
<!--图片上传-->
<script src="__PUBLIC__/scripts/uploadPreview.js" ></script>
<script src="__PUBLIC__/scripts/postActivity.js"></script>
<script src="__PUBLIC__/scripts/personal.js"></script>
<script>
    var width = $(window).width();
    if(width>768){
        var ue = new UE.ui.Editor({initialFrameHeight:500});
        ue.render('editor');
//        var ue = UE.getEditor('editor');
    }else{
        var ue = UE.getEditor('editor',{
            //这里可以选择自己需要的工具按钮名称,此处仅选择如下五个
            initialFrameHeight:200,toolbars:[['FullScreen','bold','underline','forecolor','simpleupload','fontsize','test']]
            //focus时自动清空初始化时的内容
//        autoClearinitialContent:true,
//        //关闭字数统计
//        wordCount:false,
//        //关闭elementPath
//        elementPathEnabled:false,
//        //默认的编辑区域高度
//        initialFrameHeight:300
            //更多其他参数，请参考ueditor.config.js中的配置项
        });
    }
</script>
<script>
    $('.signCost input').click(function(){
        $('.signCost input').removeClass('bd9 g9a ');
        $(this).addClass('bd9 g9a ');
        if($(this).val()=='免费活动'){
            $(".js-isfree").val(0);
        }else{
            $(".js-isfree").val(1);
        }
    });
    $('.js-updated-sub').click(function(){
        $(".js-act-form").submit();
    });

    //    表单验证

</script>
</body>
</html>