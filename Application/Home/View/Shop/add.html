<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--ie-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- [if lt IE 9]>-->
    <script src="__PUBLIC__/scripts/html5shiv.min.js"></script>
    <script src="__PUBLIC__/scripts/respond.min.js"></script>
    <!-- <![endif]-->
    <script src="__PUBLIC__/scripts/common.js"></script>
    <script src="__PUBLIC__/scripts/jquery-1.12.4.min.js"></script>
    <link href="__PUBLIC__/styles/bootstrap.min.css" rel="stylesheet" />
    <link href="__PUBLIC__/styles/base.css" rel="stylesheet" />
    <link rel="stylesheet" href="__PUBLIC__/styles/footer.css">
    <link href="__PUBLIC__/styles/template.css" rel="stylesheet" />
    <link href="__PUBLIC__/styles/shopsManagement.css" rel="stylesheet" />
    <link href="__PUBLIC__/styles/editCommodity.css" rel="stylesheet" />
    <!--引入富文本编辑器配置-->
        <script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.config.js"></script>
        <script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.all.min.js"></script>
    <!--引入富文本编辑器配置-->
    <title>店铺管理-编辑商品</title>
</head>
<body>
<!--editCommodity-->
<div class="bgwh">
    <!--企业理businessManagement-->
    <include file="Public/top1"/>
    <hr>
    <div class="shops fn-clear">
        <a href="{:U('Home/Shop/shopsManagement')}"><input class="f16 wh l" type="button" value="管理店铺"></a>
        <if condition="$shop.logo eq ''">
            <a href="#"><img src="__PUBLIC__/images/shops/twoLogo.jpg" alt="logo"></a>
            <else/>
            <a href="#"><img src="__PUBLIC__{$shop.logo}" alt="logo"></a>
        </if>
        <!--<div class="r search rel hidden-xs"><input class="f16 g3c" type="search" placeholder="搜索您感兴趣的内容"></div>-->
    </div>
    <!--导航-->
    <div class=" navbar-nav  navbar-inverse">
        <div class="navbar-header">
            <button class="navbar-toggle " data-toggle="collapse" data-target="#mycollapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <!--折叠部分-->
        <div class="collapse navbar-collapse" id="mycollapse" >
            <!--当屏幕宽度小于768px时 会将ul列表隐藏-->
            <ul class="nav navbar-nav">
                <li class="indexNav rel"><a href="{:U('Home/Index/index')}">首页</a></li>
                <!--<li><a href="#">全部商品 </a></li>-->
                <!--<li><a href="#">最新商品 </a></li>-->
                <!--<li><a href="#">店铺活动</a></li>-->
            </ul>
        </div>
    </div>
    <!--导航 end-->
</div>
<!--banner上传-->
<div id="banner" class="dib upImg fn-clear rel">
    <if condition="$shop.banner eq ''">
        <lable  class="imgdiv" id="imgdiv" for="up_img"><img  id="imgShow" class="imgShow" src="__PUBLIC__/images/shops/twoBanner.jpg"  /></lable>
        <else/>
        <lable  class="imgdiv" id="imgdiv" for="up_img"><img  id="imgShow" class="imgShow" src="__PUBLIC__{$shop.banner}"  /></lable>
    </if>
    <!--<input class="abs up_img" type="file" id="up_img" value="上传"/>-->
    <!--<label class="abs upBtn f22" for="up_img">上传图片</label>-->
</div>
<!--banner上传 end-->
<!--content-->
<div class="content bgwh">
    <h3 class="f18 rel g3c">添加/编辑商品</h3>
    <form action="{:U('Home/Shop/add')}" method="post" id="myForm" enctype="multipart/form-data">
    <div>
        <label class="f16 g3c">商品名称</label>
        <input type="text" name="name" notNull="商品名称" value="{$good.name}" class="required js-name">
        <input type="hidden" name="shopid" class="js-shopid" value="{$shop.shopid}"/>
        <input type="hidden" name="goodid" class="js-goodid" value="{$good.goodid}"/>
    </div>
    <div>
        <label class="f16">图片</label>
        <div class="dib upImgT fn-clear">
                <if condition="$good.picture eq ''">
                    <lable class="l logoDiv js-pic"  id="logoDiv"><img class="editImg" id="logoImg" /></lable>
                    <else/>
                    <lable class="l logoDiv js-pic"  id="logoDiv"><img src="__PUBLIC__{$good.picture}" class="editImg" id="logoImg" /></lable>
                </if>
            <div class="l f12 upImgTitle required" notNull="图片">
                <p class="g8c hidden-xs">图片不得大于4M (jpg、gif、png、bmp)</p>
                <p class="g8c hidden-xs"> 推荐尺寸 472*280 px的图片</p>
                <div class="up_imgT rel">
                    <input class="abs js-picture" type="file" name="picture" id="logo_up" value="上传"/>
                    <label class="abs logo_up f18 wh" >上传</label>
                </div>
            </div>
        </div>
    </div>
    <div>
        <label class="f16 g3c">原价</label>
        <input type="text" class="js-price" name="price" value="{$good.price}" id="original" >
        <span>元</span>
        <p class="dib notNull='原价' required" >（<span id="originalW"></span>维币）</p>
    </div>
    <div>
        <label class="f16 g3c">优惠价</label>
        <input type="text" name="nowprice" value="{$good.nowprice}" id="favorable">
        <span>元</span>
        <p class="dib">（<span id="favorableY"></span>维币）</p>
    </div>
    <div>
        <label class="f16 g3c">商品介绍</label>
        <textarea name="intro">{$good.intro}</textarea>
    </div>
        <div>
            <label class="f16 g3c">商品详情</label><strong class="high" style="color:red;">*</strong>
           <script type="text/plain" class="js-content" id="editor" name="content">{$good.content}</script>
        </div>
    <div>
        <label class="f16 g3c">推荐</label>
        <ul id="recommend"  class="recommend dib fn-clear">
            <li class="rel l">
                <input class="abs" type="radio" value="1" name="type" <if condition="$good.type neq 2">checked='checked' </if> >
                <span class="f16 g78 abs <if condition="$good.type neq 2">recommendY</if> ">精品</span>
            </li>
            <li class="rel l">
                <input class="abs" type="radio" value="2" name="type" <if condition="$good.type eq 2">checked='checked' </if> >
                <span class="f16 g78 abs <if condition="$good.type eq 2">recommendY</if> ">热门</span>
            </li>
        </ul>
    </div>
    <div>
        <label class="f16 g3c">商品状态</label>
        <ul id="state" class="recommend state dib fn-clear">
            <li class="rel l">
                <input class="abs" type="radio" value="1" name="status" <if condition="$good.status neq 2">checked='checked' </if> >
                <span class="f16 g78 abs <if condition="$good.status neq 2">recommendY</if> ">上架</span>
            </li>
            <li class="rel l">
                <input class="abs" type="radio" value="2" name="status" <if condition="$good.status eq 2">checked='checked' </if> >
                <span class="f16 g78 abs <if condition="$good.status eq 2">recommendY</if> ">下架</span>
            </li>
        </ul>
    </div>
    <div class="save f16 wh js-sub" ><span>保存</span></div>
   </form>
</div>
<script src="__PUBLIC__/scripts/bootstrap.js"></script>
<script src="__PUBLIC__/scripts/uploadPreview.js" ></script>
<script src="__PUBLIC__/scripts/shopsManagement.js"></script>
<script type="text/javascript">
    var width = $(window).width();
    if(width>768){
        var ue = new UE.ui.Editor({initialFrameHeight:500});
        ue.render('editor');
    }else{
        var ue = UE.getEditor('editor',{
            //这里可以选择自己需要的工具按钮名称,此处仅选择如下五个
            initialFrameHeight:200,toolbars:[['FullScreen','bold','underline','forecolor','simpleupload','fontsize','test']]
    });
    }
    $(function(){
       $(".js-sub").click(function(){
           var name = $(".js-name").val();
           var picture = $(".js-picture").val();
           var price = $(".js-price").val();
           var shopid = $(".js-shopid").val();
           var goodid = $(".js-goodid").val();
           var content = ue.hasContents();
           var flag = true;
           if(shopid==''){
               alert("参数有误");
               flag = false;
               return false;
           }
           if(name==''){
               alert("商品名不能为空");
               flag = false;
               return false;
           }
            if(goodid ==''){
                if(picture==''){
                    alert("图片不能为空");
                    flag = false;
                    return false;
                }
            }
           if(price==''){
               alert("价格不能为空");
               flag = false;
               return false;
           }
           if(!content||content==undefined){
               alert("商品详情不能为空");
               flag = false;
               return false;
           }
           if(flag){
               $("#myForm").submit();
           }
       }) ;
    });
    window.onload = function () {
        new uploadPreview({UpBtn:'logo_up',DivShow:'logoDiv',ImgShow:"logoImg"});
    };
</script>
</body>
</html>