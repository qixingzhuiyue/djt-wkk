<include file='Common:top'/>
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.all.min.js"> </script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/lang/zh-cn/zh-cn.js"></script>
</head>
<body>
<div class="template">
    <div class="template_top">
        <div class="template_top_left">
            <h1>新闻管理>发布新闻资讯</h1>
        </div>
        <div class="template_top_right">
            <a href="{:U('Admin/News/index')}" class="ul_button">返回</a>
        </div>
        <div class="fn-clear"></div>
    </div>
    <div class="add">
    
    <form name="adminForm" id="js-form" action="{:U('Admin/News/addHandle')}" enctype="multipart/form-data"  method="post">
        <ul class="add_blank">                       
            <li><div class="blank_left">标题</div><div class="blank_right"><input class="js-title" type="text" name="title" /></div><div class="fn-clear"></div></li>
            <li><div class="blank_left">图片</div><div class="blank_right"><input type="file" class="js-picture"  name="picture" /></div><div class="fn-clear"></div></li>
            <li><div class="blank_left">摘要</div><div class="blank_right"><textarea
                    class="js-intro" name="intro"></textarea></div><div class="fn-clear"></div></li>
            <li><div class="blank_left">正文</div><div class="blank_right"> <script id="editor" class="js-content" name="content" type="text/plain" style="width:700px;height:500px;"></script></div><div class="fn-clear"></div></li>
            <li><div class="blank_left"><span class="blank_color">*</span>状态</div><div class="blank_right">
            <input type="radio" name="status" value="1"  class="ul_middle" checked/>&nbsp;正常&nbsp;&nbsp;
            <input type="radio" name="status" value="0" class="ul_middle" />&nbsp;屏蔽
            </div><div class="fn-clear"></div></li>
            <li><div class="blank_left"><span class="blank_color">*</span>推荐</div><div class="blank_right">
            <input type="radio" name="type" value="1"   class="ul_middle" checked />&nbsp;精品&nbsp;&nbsp;
            <input type="radio" name="type" value="2" class="ul_middle" />&nbsp;热门
            </div><div class="fn-clear"></div></li>
            <li class="ul_word"><input type="button" class="ul_add js-sub" value="保存"/><input type="button" class="ul_cancel" onclick="history.go(-1);"  value="取消"/></li>
        </ul></form>
    </div>
</div>
<script>
    var ue = UE.getEditor('editor');
</script>
<script type="text/javascript">
    $(".js-sub").click(function(){
        var title = $(".js-title").val();
        var picture = $(".js-picture").val();
        var intro = $(".js-intro").val();
        //百度富文本编辑获取编辑内容若编辑器中只包含字符"<p><br /></p/>"会返回空。
        var content = ue.getContent();
        var flag = true;
        var msg = '';
        if(title==''){
            flag = false;
            msg+="标题,";
        }
        if(picture==''){
            flag = false;
            msg+="图片,";
        }
        if(intro==''){
            flag = false;
            msg+="摘要,";
        }
        if(content==''){
            flag = false;
            msg+="内容,";
        }
        if(!flag){
            var preg = /,$/gi;
            msg = msg.replace(preg,'');
            msg+="不能为空";
            alert(msg);
        }else{
            $("#js-form").submit();
        }
    });
</script>
</body>
</html>