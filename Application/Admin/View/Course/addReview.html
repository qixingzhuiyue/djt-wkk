<include file='Common:top'/>
<!--引入富文本编辑器文件开始-->
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/ueditor.all.min.js"> </script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="__ROOT__/Public/ueditor/lang/zh-cn/zh-cn.js"></script>
<!--引入富文本编辑器文件结束-->
</head>
<body>
<div class="template">
    <div class="template_top">
        <div class="template_top_left">
            <h1>课程管理>添加精彩课程瞬间</h1>
        </div>
        <div class="template_top_right">
            <a href="{:U('Admin/Course/reviewList')}" class="ul_button">返回</a>
        </div>
        <div class="fn-clear"></div>
    </div>
    <div class="add">
    
    <form name="adminForm" class="js-form" action="{:U('Admin/Course/addReviewHandle')}"  method="post" enctype="multipart/form-data">
        <ul class="add_blank">                       
            <li><div class="blank_left">标题</div><div class="blank_right"><input class="js-title w100 h-35" type="text" name="title" /></div><div class="fn-clear"></div></li>
            <li><div class="blank_left">图片</div><div class="blank_right"><input class="js-picture w100 h-35" type="file" name="picture" /></div><div class="fn-clear"></div></li>
            <li><div class="blank_left">简介</div><div class="blank_right"><textarea name="intro" class="w100 h-80 js-intro"></textarea></div><div class="fn-clear"></div></li>
            <li><div class="blank_left">正文</div><div class="blank_right"> <script id="editor" name="content" type="text/plain"></script></div><div class="fn-clear"></div></li>
            <li><div class="blank_left"><span class="blank_color">*</span>推荐</div><div class="blank_right">
                <input type="radio" name="ispush" value="1"  class="ul_middle" />&nbsp;是&nbsp;&nbsp;
                <input type="radio" name="ispush" value="0" class="ul_middle" checked/>&nbsp;否
            </div><div class="fn-clear"></div></li>
            <li><div class="blank_left"><span class="blank_color">*</span>状态</div><div class="blank_right">
            <input type="radio" name="status" value="1"  class="ul_middle" checked/>&nbsp;正常&nbsp;&nbsp;
            <input type="radio" name="status" value="0" class="ul_middle" />&nbsp;屏蔽
            </div><div class="fn-clear"></div></li>
            <li class="ul_word"><input type="button" class="ul_add js-sub" value="保存"/><input type="button" class="ul_cancel" onclick="history.go(-1);"  value="取消"/></li>
        </ul></form>
    </div>
</div>
<script>
    var ue = new UE.ui.Editor({initialFrameHeight:500});
    ue.render("editor");
    $(function(){
        $(".js-sub").click(function(){
            var title = $(".js-title").val();
            var intro = $(".js-intro").val();
            var picture = $(".js-picture").val();
            var content = ue.hasContents();
            var flag = true;
            var msg = '';
            if(title == ''){
//                alert("标题不能为空");
                flag = false;
                msg+="标题不能为空,";
//                return false;
            }
            if(intro == ''){
//                alert("简介不能为空");
                flag = false;
                msg+="简介不能为空,";
//                return false;
            }
            if(picture == ''){
//                alert("图片不能为空");
                msg+="图片不能为空,";
                flag = false;
//                return false;
            }
            if(!content){
//                alert("内容不能为空");
                msg+="内容不能为空,";
                flag = false;
//                return false;
            }

            if(flag){
                $(".js-form").submit();
            }else{
                msg = msg.replace(/(^,*)|(,*$)/g,'');
                alert(msg);
                return false;
            }
        }) ;
    });
</script>
</body>
</html>